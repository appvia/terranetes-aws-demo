apiVersion: batch/v1
kind: Job
metadata:
  name: aws-storage-example
spec:
  template:
    spec:
      containers:
      - name: aws-storage-example
        image: tstahlfsu/aws-storage-example:latest
        imagePullPolicy: "Always"
        env:
        # The first name: is what you want the env var to be inside the container.
          - name: S3_BUCKET_ID
            valueFrom:
              secretKeyRef:
              # The key: here is what maps to the secret key created from the TF controller.
                name: appvias3
                key: S3_BUCKET_ID
                optional: false 
      restartPolicy: Never
  backoffLimit: 2
